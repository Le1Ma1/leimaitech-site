<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8">
  <title>ä»˜æ¬¾çµæœæŸ¥è©¢ï½œLeiMai Tech</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <style>
    body { background: #181c37; color: #fff; font-family: 'Noto Sans TC', sans-serif; min-height: 100vh; display: flex; flex-direction: column; align-items: center; justify-content: center;}
    .result-card { background: #252545; padding: 2.5em 1.5em; border-radius: 22px; box-shadow: 0 8px 32px #0008; text-align: center;}
    .result { font-size: 1.5em; margin-bottom: 1.2em;}
    .loader { border: 4px solid #23244b; border-top: 4px solid #00c2ff; border-radius: 50%; width: 34px; height: 34px; animation: spin 1s linear infinite; display: inline-block;}
    @keyframes spin {100% {transform: rotate(360deg);}}
    .success { color: #25f489; }
    .fail { color: #ff5277; }
    .pending { color: #ffe084; }
  </style>
</head>
<body>
  <div class="result-card">
    <div id="result" class="result pending">
      <span class="loader"></span> ä»˜æ¬¾ç‹€æ…‹æŸ¥è©¢ä¸­...
    </div>
    <div id="orderInfo"></div>
    <a href="/" style="margin-top:1.5em; display: inline-block; color:#00c2ff;">è¿”å›é¦–é </a>
  </div>
  <script>
    // å–å¾— URL çš„ order_no
    const params = new URLSearchParams(window.location.search);
    const order_no = params.get('order_no');
    if (!order_no) {
      document.getElementById('result').innerHTML = '<span class="fail">æœªå¸¶å…¥è¨‚å–®ç·¨è™Ÿï¼Œè«‹å¾æ­£ç¢ºæµç¨‹ä»˜æ¬¾</span>';
    } else {
      fetch(`/api/order-status?order_no=${order_no}`)
        .then(res => res.json())
        .then(data => {
          if (data.status === 'paid') {
            document.getElementById('result').innerHTML = '<span class="success">ğŸ‰ ä»˜æ¬¾æˆåŠŸï¼Œè¨‚é–±å·²é–‹é€šï¼</span>';
          } else if (data.status === 'pending') {
            document.getElementById('result').innerHTML = '<span class="pending">ä»˜æ¬¾è™•ç†ä¸­ï¼Œè«‹ç¨å¾Œåˆ·æ–°æˆ–è¯ç¹«å®¢æœ</span>';
          } else {
            document.getElementById('result').innerHTML = '<span class="fail">æœªå®Œæˆä»˜æ¬¾æˆ–è¨‚å–®ä¸å­˜åœ¨ï¼Œè«‹è¯ç¹«å®¢æœï¼</span>';
          }
          // é¡å¤–é¡¯ç¤ºè¨‚å–®ç·¨è™Ÿç­‰è³‡è¨Š
          document.getElementById('orderInfo').innerText = 'è¨‚å–®ç·¨è™Ÿï¼š' + order_no;
        })
        .catch(err => {
          document.getElementById('result').innerHTML = '<span class="fail">æŸ¥è©¢ç™¼ç”ŸéŒ¯èª¤ï¼Œè«‹è¯ç¹«å®¢æœï¼</span>';
        });
    }
  </script>
</body>
</html>
